<!-- 递归输出菜单 -->

<ul nz-menu [nzMode]="'inline'" style="height:100%">
  <ng-container *ngFor="let item of navItems">
    <ng-container *ngTemplateOutlet="menuTpl; context: {$implicit: item}"></ng-container>
  </ng-container>
</ul>

<ng-template #menuTpl let-menu>
  <ng-container [ngSwitch]="item.type">
    <ng-template ngSwitchCase="'submenu'">
      <ng-container *ngIf="!!menu.children && menu.children.length > 0">
        <li nz-submenu [nzTitle]="menu.name">
          <ul>
            <ng-container *ngFor="let item of menu.children">
              <ng-container *ngTemplateOutlet="menuTpl; context: {$implicit: item}"></ng-container>
            </ng-container>
          </ul>
        </li>
      </ng-container>
    </ng-template>
    <ng-template ngSwitchCase="'group'">
      <ng-container *ngIf="!!menu.children && menu.children.length > 0">
        <li nz-menu-group [nzTitle]="menu.name">
          <ul>
            <ng-container *ngFor="let item of menu.children">
              <ng-container *ngTemplateOutlet="menuTpl; context: {$implicit: item}"></ng-container>
            </ng-container>
          </ul>
        </li>
      </ng-container>
    </ng-template>
    <ng-template ngSwitchDefault>
      <li nz-menu-item>
        <a [routerLink]="menu.route" routerLinkActive="router-link-active">{{menu.name}}</a>
      </li>
    </ng-template>
  </ng-container>
</ng-template>